# Fact-Check API

API ููุชุญูู ูู ุงูุฃุฎุจุงุฑ ูุตูุงุบุฉ ุงููุญุชูู ุงูุฅุฎุจุงุฑู ุจุงุณุชุฎุฏุงู OpenAI ู SerpAPI.

## โ๏ธ ููุงุญุธุฉ ูุงูุฉ

ุงููุธุงู ูุฏุนู **ุญุงูุชูู ููุท** ููุชูุฌุฉ ุงููุญุต:
- โ **ุญูููู (True)** - ุนูุฏูุง ูุชู ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุฎุจุฑ ูู ูุตุงุฏุฑ ููุซููุฉ
- โ๏ธ **ุบูุฑ ูุคูุฏ (Uncertain)** - ุนูุฏูุง ูุง ุชูุฌุฏ ูุนูููุงุช ูุงููุฉ ุฃู ูุตุงุฏุฑ ูุงุถุญุฉ

**ูุง ุชูุฌุฏ ุญุงูุฉ "ูุงุฐุจ" (False)** - ุฅุฐุง ูู ูุชู ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุฎุจุฑุ ูุชู ุชุตูููู ุชููุงุฆูุงู ูู "ุบูุฑ ูุคูุฏ" ุจุฏูุงู ูู "ูุงุฐุจ".

## ุงููููุฒุงุช

- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุฃุฎุจุงุฑ ูุงูุงุฏุนุงุกุงุช
- ๐ฐ ุตูุงุบุฉ ููุงูุงุช ุฅุฎุจุงุฑูุฉ ุงุญุชุฑุงููุฉ
- ๐ฆ ุตูุงุบุฉ ุชุบุฑูุฏุงุช ููููุตุงุช ุงูุงุฌุชูุงุนูุฉ
- ๐ ุงูุจุญุซ ุนู ุงููุตุงุฏุฑ ุงูููุซููุฉ
- ๐ ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช (ุงูุนุฑุจูุฉุ ุงูุฅูุฌููุฒูุฉุ ุงููุฑูุณูุฉุ ุงูุฅุณุจุงููุฉุ ูุบูุฑูุง)

## ุงูุชุซุจูุช

```bash
# ุชุซุจูุช ุงููุชุทูุจุงุช
pip install -r requirements.txt

# ุฅุนุฏุงุฏ ููู .env
SERPAPI_KEY=your_serpapi_key
OPENAI_API_KEY=your_openai_key
OPENAI_MODEL=gpt-4o
SERPAPI_HL=ar
SERPAPI_GL=
NEWS_AGENCIES=aljazeera.net,una-oic.org,bbc.com

# ุชุดุบูู ุงูุณูุฑูุฑ
python manage.py runserver
```

## API Endpoints

### 1. ุงูุชุญูู ูู ุงูุฃุฎุจุงุฑ (Fact-Check)

**ุงูุทุฑููุฉ:** `POST /fact_check_with_openai/`

**ุงูุทูุจ:**
```json
{
  "query": "ูุต ุงูุฎุจุฑ ุฃู ุงูุงุฏุนุงุก ุงููุฑุงุฏ ุงูุชุญูู ููู",
  "generate_news": true,  // ุงุฎุชูุงุฑู: ุชูููุฏ ููุงู ุฅุฎุจุงุฑู ูุจุงุดุฑุฉ
  "preserve_sources": false,  // ุงุฎุชูุงุฑู: ุงูุงุญุชูุงุธ ุจุงููุตุงุฏุฑ ุญุชู ูููุชุงุฆุฌ ุบูุฑ ุงููุคูุฏุฉ
  "generate_tweet": true  // ุงุฎุชูุงุฑู: ุชูููุฏ ุชุบุฑูุฏุฉ ูุจุงุดุฑุฉ
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "ok": true,
  "query": "ุงููุต ุงููุฏุฎู",
  "case": "ุญูููู / ุบูุฑ ูุคูุฏ",
  "talk": "ุงูุชุญููู ุงูููุตู ููุชูุฌุฉ ุงููุญุต",
  "sources": [
    {
      "title": "ุนููุงู ุงููุตุฏุฑ",
      "url": "ุฑุงุจุท ุงููุตุฏุฑ"
    }
  ],
  "news_article": "ุงูููุงู ุงูุฅุฎุจุงุฑู (ุฅุฐุง ูุงู generate_news=true)",
  "x_tweet": "ุงูุชุบุฑูุฏุฉ (ุฅุฐุง ูุงู generate_tweet=true)"
}
```

### 2. ุตูุงุบุฉ ุฎุจุฑ ูู ูุชูุฌุฉ ุงููุญุต

**ุงูุทุฑููุฉ:** `POST /fact_check_with_openai/compose_news/`

ูุชูุญ ูู ูุฐุง Endpoint ุตูุงุบุฉ ููุงู ุฅุฎุจุงุฑู ุงุญุชุฑุงูู ุจุนุฏ ุฅุฌุฑุงุก ุงููุญุตุ ุจุงุณุชุฎุฏุงู ุงููุชูุฌุฉ ูุจุงุดุฑุฉ **ุฏูู ุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**.

**ุงูุทูุจ:**
```json
{
  "claim_text": "ุงููุต ุงููุฑุงุฏ ูุญุตู",
  "case": "ุญูููู / ุบูุฑ ูุคูุฏ",
  "talk": "ุงูุชุญููู ุงููุงุชุฌ ูู ุงููุญุต",
  "sources": [
    {
      "title": "ุนููุงู ุงููุตุฏุฑ",
      "url": "ุฑุงุจุท ุงููุตุฏุฑ",
      "snippet": "ููุฎุต ุงููุตุฏุฑ"
    }
  ],
  "lang": "ar"  // ุงุฎุชูุงุฑูุ ุงูุงูุชุฑุงุถู: ar
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "ok": true,
  "news_article": "ุงูููุงู ุงูุฅุฎุจุงุฑู ุงููุตุงุบ ุจุดูู ุงุญุชุฑุงูู"
}
```

**ูุซุงู ุงุณุชุฎุฏุงู:**
```bash
curl -X POST http://localhost:8000/fact_check_with_openai/compose_news/ \
  -H "Content-Type: application/json" \
  -d '{
    "claim_text": "ุชู ุงูุชุชุงุญ ูุทุงุฑ ุฌุฏูุฏ ูู ุงูุฑูุงุถ",
    "case": "ุญูููู",
    "talk": "ุชู ุงูุชุฃูุฏ ูู ุงูุชุชุงุญ ุงููุทุงุฑ ูู ุฎูุงู ูุตุงุฏุฑ ุฑุณููุฉ",
    "sources": [
      {
        "title": "ุงูููุฆุฉ ุงูุนุงูุฉ ููุทูุฑุงู ุงููุฏูู ุชุนูู ุงูุชุชุงุญ ุงููุทุงุฑ",
        "url": "https://example.com/news",
        "snippet": "ุฃุนููุช ุงูููุฆุฉ ุนู ุงูุชุชุงุญ ุงููุทุงุฑ ุงูุฌุฏูุฏ"
      }
    ],
    "lang": "ar"
  }'
```

### 3. ุตูุงุบุฉ ุชุบุฑูุฏุฉ ูู ูุชูุฌุฉ ุงููุญุต

**ุงูุทุฑููุฉ:** `POST /fact_check_with_openai/compose_tweet/`

ูุชูุญ ูู ูุฐุง Endpoint ุตูุงุบุฉ ุชุบุฑูุฏุฉ ุงุญุชุฑุงููุฉ ุจุนุฏ ุฅุฌุฑุงุก ุงููุญุตุ ุจุงุณุชุฎุฏุงู ุงููุชูุฌุฉ ูุจุงุดุฑุฉ **ุฏูู ุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**.

**ุงูุทูุจ:**
```json
{
  "claim_text": "ุงููุต ุงููุฑุงุฏ ูุญุตู",
  "case": "ุญูููู / ุบูุฑ ูุคูุฏ",
  "talk": "ุงูุชุญููู ุงููุงุชุฌ ูู ุงููุญุต",
  "sources": [
    {
      "title": "ุนููุงู ุงููุตุฏุฑ",
      "url": "ุฑุงุจุท ุงููุตุฏุฑ",
      "snippet": "ููุฎุต ุงููุตุฏุฑ"
    }
  ],
  "lang": "ar"  // ุงุฎุชูุงุฑูุ ุงูุงูุชุฑุงุถู: ar
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "ok": true,
  "x_tweet": "ุงูุชุบุฑูุฏุฉ ุงููุตุงุบุฉ ุจุดูู ุงุญุชุฑุงูู (ุฃูู ูู 280 ุญุฑู)"
}
```

**ูุซุงู ุงุณุชุฎุฏุงู:**
```bash
curl -X POST http://localhost:8000/fact_check_with_openai/compose_tweet/ \
  -H "Content-Type: application/json" \
  -d '{
    "claim_text": "ุชู ุงูุชุชุงุญ ูุทุงุฑ ุฌุฏูุฏ ูู ุงูุฑูุงุถ",
    "case": "ุญูููู",
    "talk": "ุชู ุงูุชุฃูุฏ ูู ุงูุชุชุงุญ ุงููุทุงุฑ ูู ุฎูุงู ูุตุงุฏุฑ ุฑุณููุฉ",
    "sources": [
      {
        "title": "ุงูููุฆุฉ ุงูุนุงูุฉ ููุทูุฑุงู ุงููุฏูู ุชุนูู ุงูุชุชุงุญ ุงููุทุงุฑ",
        "url": "https://example.com/news",
        "snippet": "ุฃุนููุช ุงูููุฆุฉ ุนู ุงูุชุชุงุญ ุงููุทุงุฑ ุงูุฌุฏูุฏ"
      }
    ],
    "lang": "ar"
  }'
```

### 4. ุตูุงุบุฉ ููุงู ุชุญูููู

**ุงูุทุฑููุฉ:** `POST /fact_check_with_openai/analytical_news/`

**ุงูุทูุจ:**
```json
{
  "headline": "ุนููุงู ุงูุฎุจุฑ",
  "analysis": "ุงูุชุญููู ุงูุชุญููู",
  "lang": "ar"  // ุงุฎุชูุงุฑูุ ุงูุงูุชุฑุงุถู: ar
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "ok": true,
  "headline": "ุนููุงู ุงูุฎุจุฑ",
  "analysis": "ุงูุชุญููู ุงูุชุญููู",
  "analytical_article": "ุงูููุงู ุงูุชุญูููู ุงููุตุงุบ"
}
```

## ุณูุฑ ุงูุนูู (Workflow)

### ุงูุทุฑููุฉ ุงูุฃููู: ูู ุดูุก ุฏูุนุฉ ูุงุญุฏุฉ
```javascript
// ูุญุต ูุตูุงุบุฉ ูู ุฎุทูุฉ ูุงุญุฏุฉ
const response = await fetch('/fact_check_with_openai/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    query: "ูุต ุงูุฎุจุฑ",
    generate_news: true,
    generate_tweet: true
  })
});

const result = await response.json();
// ุณุชุญุตู ุนูู: case, talk, sources, news_article, x_tweet
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงููุญุต ุซู ุงูุตูุงุบุฉ (ููุตู ุจูุง ููุชุญูู ุงูุฃูุถู)
```javascript
// 1. ุฃููุงู: ูุญุต ุงูุฎุจุฑ
const checkResponse = await fetch('/fact_check_with_openai/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    query: "ูุต ุงูุฎุจุฑ"
  })
});

const checkResult = await checkResponse.json();
// checkResult ูุญุชูู ุนูู: case, talk, sources

// 2. ุซุงููุงู: ุตูุงุบุฉ ุฎุจุฑ (ุจุฏูู ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
const newsResponse = await fetch('/fact_check_with_openai/compose_news/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    claim_text: "ูุต ุงูุฎุจุฑ",
    case: checkResult.case,
    talk: checkResult.talk,
    sources: checkResult.sources,
    lang: "ar"
  })
});

const newsResult = await newsResponse.json();
// newsResult.news_article ูุญุชูู ุนูู ุงูููุงู

// 3. ุฃู: ุตูุงุบุฉ ุชุบุฑูุฏุฉ (ุจุฏูู ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
const tweetResponse = await fetch('/fact_check_with_openai/compose_tweet/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    claim_text: "ูุต ุงูุฎุจุฑ",
    case: checkResult.case,
    talk: checkResult.talk,
    sources: checkResult.sources,
    lang: "ar"
  })
});

const tweetResult = await tweetResponse.json();
// tweetResult.x_tweet ูุญุชูู ุนูู ุงูุชุบุฑูุฏุฉ
```

## ููุงุญุธุงุช ูุงูุฉ

1. **ุนุฏู ุงูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุฌููุน endpoints ูุง ุชุญูุธ ุฃู ุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููุท ูุนุงูุฌุฉ ููุฑูุฉ
2. **ุงููุตุงุฏุฑ**: ูู ุญุงูุฉ ุงููุชุงุฆุฌ ุบูุฑ ุงููุคูุฏุฉุ ูุชู ุฅูุฑุงุบ ุงููุตุงุฏุฑ ุชููุงุฆูุงู ูุง ูู ุชุณุชุฎุฏู `preserve_sources=true`
3. **ุงููุบุงุช ุงููุฏุนููุฉ**: ุงูุนุฑุจูุฉ (ar)ุ ุงูุฅูุฌููุฒูุฉ (en)ุ ุงููุฑูุณูุฉ (fr)ุ ุงูุฅุณุจุงููุฉ (es)ุ ุงูุชุดูููุฉ (cs)ุ ูุบูุฑูุง
4. **ุญุฏ ุงูุชุบุฑูุฏุงุช**: ุงูุชุบุฑูุฏุงุช ูุญุฏูุฏุฉ ุชููุงุฆูุงู ุจู 280 ุญุฑู

## ุงูุชุทููุฑ

```bash
# ุชุดุบูู ุงูุณูุฑูุฑ ููุชุทููุฑ
python manage.py runserver

# ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
locust -f locustfile.py
```

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููููู ูู UNA-OIC
